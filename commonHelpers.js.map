{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '45384085-93240435f28f8173a532fd559';\n\nexport const fetchImages = (query) => {\n    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    return fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n\n            return response.json();\n        });\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from 'simplelightbox';\n\nexport const showToast = (msg) => {\n    iziToast.error({\n        position: \"topRight\",\n        icon: 'icon-bi_x-octagon',\n        title: '',\n        progressBarColor: 'rgb(181, 27, 27)',\n        message: msg\n    });\n}\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n//markup\nconst galleryMarkup = (images) => images.map(image =>\n    `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n            class=\"gallery-image\"\n            src=\"${image.webformatURL}\"\n            alt=\"${image.tags}\">\n        <div class=\"gallery-footer\">\n            <div class=\"item-block\">\n                <span class=\"item-title\">Likes</span>\n                <span class=\"item-count\">${image.likes}</span>\n            </div>\n            <div class=\"item-block\">\n                <span class=\"item-title\">Views</span>\n                <span class=\"item-count\">${image.views}</span>\n            </div>\n            <div class=\"item-block\">\n                <span class=\"item-title\">Comments</span>\n                <span class=\"item-count\">${image.comments}</span>\n            </div>\n            <div class=\"item-block\">\n                <span class=\"item-title\">Downloads</span>\n                <span class=\"item-count\">${image.downloads}</span>\n            </div>\n        </div>\n      </a>\n     </li>`\n).join('');\n\nexport const showGallery = (images) => {\n    gallery.innerHTML = galleryMarkup(images);\n    lightbox.refresh();\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { showGallery, showToast } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\n\nconst onSearchFormSubmit = event => {\n    event.preventDefault();\n\n    const searchedValue = event.target.elements.user_query.value.trim();\n\n    if (searchedValue === '') {\n        showToast(\"Fill out the search field!\");\n        searchForm.reset();\n        return;\n    }\n\n    loader.classList.remove('is-hidden');\n    showGallery([]);\n\n    fetchImages(searchedValue)\n        .finally(() => {\n            loader.classList.add('is-hidden');\n            searchForm.reset();\n        })\n        .then((result) => {\n            if (result && result?.hits?.length === 0) {\n                showToast(\"Sorry, there are no images matching your search query. Please try again!\");                \n                searchForm.reset();\n                return;\n            }\n\n            showGallery(result.hits);\n\n        })\n        .catch(err => {\n            console.log(err);\n        });\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);"],"names":["API_KEY","fetchImages","query","url","response","showToast","msg","iziToast","gallery","lightbox","SimpleLightbox","galleryMarkup","images","image","showGallery","searchForm","loader","onSearchFormSubmit","event","searchedValue","result","_a","err"],"mappings":"6vBAAA,MAAMA,EAAU,qCAEHC,EAAeC,GAAU,CAClC,MAAMC,EAAM,gCAAgCH,CAAO,MAAM,mBAAmBE,CAAK,CAAC,2DAElF,OAAO,MAAMC,CAAG,EACX,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGnC,OAAOA,EAAS,MAC5B,CAAS,CACT,ECVaC,EAAaC,GAAQ,CAC9BC,EAAS,MAAM,CACX,SAAU,WACV,KAAM,oBACN,MAAO,GACP,iBAAkB,mBAClB,QAASD,CACjB,CAAK,CACL,EAEME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,aAAc,GAClB,CAAC,EAGKC,EAAiBC,GAAWA,EAAO,IAAIC,GACzC;AAAA,sCACkCA,EAAM,aAAa;AAAA;AAAA;AAAA,mBAGtCA,EAAM,YAAY;AAAA,mBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,2CAIcA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,WAK1D,EAAE,KAAK,EAAE,EAEIC,EAAeF,GAAW,CACnCJ,EAAQ,UAAYG,EAAcC,CAAM,EACxCH,EAAS,QAAO,CACpB,EClDMM,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAqBC,GAAS,CAChCA,EAAM,eAAc,EAEpB,MAAMC,EAAgBD,EAAM,OAAO,SAAS,WAAW,MAAM,OAE7D,GAAIC,IAAkB,GAAI,CACtBd,EAAU,4BAA4B,EACtCU,EAAW,MAAK,EAChB,MACH,CAEDC,EAAO,UAAU,OAAO,WAAW,EACnCF,EAAY,CAAE,CAAA,EAEdb,EAAYkB,CAAa,EACpB,QAAQ,IAAM,CACXH,EAAO,UAAU,IAAI,WAAW,EAChCD,EAAW,MAAK,CAC5B,CAAS,EACA,KAAMK,GAAW,OACd,GAAIA,KAAUC,EAAAD,GAAA,YAAAA,EAAQ,OAAR,YAAAC,EAAc,UAAW,EAAG,CACtChB,EAAU,0EAA0E,EACpFU,EAAW,MAAK,EAChB,MACH,CAEDD,EAAYM,EAAO,IAAI,CAEnC,CAAS,EACA,MAAME,GAAO,CACV,QAAQ,IAAIA,CAAG,CAC3B,CAAS,CACT,EAEAP,EAAW,iBAAiB,SAAUE,CAAkB"}